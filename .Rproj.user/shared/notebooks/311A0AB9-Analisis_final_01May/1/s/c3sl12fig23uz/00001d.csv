"0","library(ggplot2)"
"0","library(dplyr)"
"0","library(dcurves)"
"0",""
"0","# Crear objeto dca"
"0","dca_control <- dca(controlado ~ prob_predicha_per_m + prob_predicha_cont_m + prob_predicha_iis_m, "
"0","                   data = df_modelos, "
"0","                   thresholds = seq(0.20, 0.40, by = 0.01))"
"2","Assuming '1' is [Event] and '0' is [non-Event]
"
"0","# Convertir a tibble y etiquetar"
"0","df_dca <- as_tibble(dca_control) %>%"
"0","  mutate(variable_label = case_when("
"0","    variable == ""prob_predicha_per_m""  ~ ""Perfiles"","
"0","    variable == ""prob_predicha_cont_m"" ~ ""Conteo"","
"0","    variable == ""prob_predicha_iis_m""  ~ ""√çndice"","
"0","    variable == ""all"" ~ ""Tratar a todos"","
"0","    variable == ""none"" ~ ""Tratar a nadie"""
"0","  ))"
"0",""
"0","# Graficar suavizado con l√≠mites en eje Y"
"0","ggplot(df_dca, aes(x = threshold, y = net_benefit, color = variable_label)) +"
"0","  geom_smooth(se = FALSE, method = ""loess"", span = 0.3, linewidth = 1) +"
"0","  scale_color_manual("
"0","    values = c("
"0","      ""Perfiles"" = ""#003399"",      # Azul rey"
"0","      ""Conteo"" = ""#8B0000"",        # Rojo oscuro"
"0","      ""√çndice"" = ""#006400"",        # Verde oscuro"
"0","      ""Tratar a todos"" = ""black"",  # Negro"
"0","      ""Tratar a nadie"" = ""grey40""  # Gris oscuro"
"0","    )"
"0","  ) +"
"0","  coord_cartesian(ylim = c(-0.05, NA)) +  # Limitar Y hasta -0.05"
"0","  labs("
"0","    title = ""Curvas de beneficio neto (DCA)"","
"0","    x = ""Umbral de probabilidad"","
"0","    y = ""Beneficio neto"","
"0","    color = NULL"
"0","  ) +"
"0","  theme_minimal() +"
"0","  theme(text = element_text(size = 12))"
"1","[38;5;232m`geom_smooth()` using formula = 'y ~ x'[39m
"
