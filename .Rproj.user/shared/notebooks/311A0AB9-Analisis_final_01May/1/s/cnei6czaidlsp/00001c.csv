"0","get_calib_data <- function(probs, outcome, model_name) {"
"0","  data.frame("
"0","    prob = probs,"
"0","    outcome = outcome,"
"0","    model = model_name"
"0","  )"
"0","}"
"0",""
"0","# ==== Preparar datos de calibración ===="
"0",""
"0","calib_perfiles <- get_calib_data(df_modelos$prob_predicha_per_f_m, df_modelos$fragilidad, ""Perfiles"")"
"0","calib_conteo   <- get_calib_data(df_modelos$prob_predicha_cont_f_m, df_modelos$fragilidad, ""Conteo"")"
"0","calib_indice   <- get_calib_data(df_modelos$prob_predicha_iis_f_m, df_modelos$fragilidad, ""Índice"")"
"0",""
"0","# Combinar todos los datos"
"0","calib_all <- bind_rows(calib_perfiles, calib_conteo, calib_indice)"
"0",""
"0","# ==== Graficar curvas de calibración ===="
"0",""
"0","ggplot(calib_all, aes(x = prob, y = outcome, color = model)) +"
"0","  geom_smooth(method = ""loess"", se = FALSE, span = 0.8, size = 1) +"
"0","  geom_abline(slope = 1, intercept = 0, linetype = ""dashed"") +"
"0","  scale_x_continuous(limits = c(0, 1)) +"
"0","  scale_y_continuous(limits = c(0, 1)) +"
"0","  scale_color_manual(values = c("
"0","    ""Perfiles"" = ""#003399"",   # Azul rey"
"0","    ""Conteo""   = ""#8B0000"",   # Rojo oscuro"
"0","    ""Índice""   = ""#006400""    # Verde oscuro"
"0","  )) +"
"0","  labs("
"0","    title = ""Curvas de calibración suavizadas (fragilidad)"","
"0","    x = ""Probabilidad predicha"","
"0","    y = ""Proporción observada"""
"0","  ) +"
"0","  theme_minimal() +"
"0","  theme("
"0","    legend.title = element_blank(),"
"0","    text = element_text(size = 12)"
"0","  )"
"2","Warning:"
"2"," [38;5;232mUsing `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
[36mℹ[38;5;232m Please use `linewidth` instead.
[90mThis warning is displayed once every 8 hours.[38;5;232m
[90mCall `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.[38;5;232m[39m
"
"1","[38;5;232m`geom_smooth()` using formula = 'y ~ x'[39m
"
